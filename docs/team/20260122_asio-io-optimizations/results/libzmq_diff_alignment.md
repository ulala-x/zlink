# libzmq vs zlink diff alignment checklist (ordered)

Legend:
- KEEP: intentional divergence (asio core, zmp protocol, removed features)
- ALIGN: candidate for libzmq code alignment
- REVIEW: needs deeper inspection before choosing

Ordered by diff list:

- src/address.cpp: KEEP (removed ws/udp/tipc/vmci, added tls mapping)
- src/address.hpp: KEEP (removed udp/pgm/norm/tipc/vmci, added tls)
- src/blob.hpp: ALIGN (done: macro name matches libzmq)
- src/ctx.cpp: KEEP (vmci removal; zero_copy restored)
- src/ctx.hpp: KEEP (vmci removal; zero_copy restored)
- src/decoder_allocators.cpp: ALIGN (done: malloc/free)
- src/decoder_allocators.hpp: ALIGN (done: malloc/free)
- src/encoder.hpp: ALIGN (done: malloc/free, stats removed)
- src/io_object.cpp: KEEP (asio core)
- src/io_object.hpp: KEEP (asio core)
- src/io_thread.cpp: KEEP (asio core)
- src/io_thread.hpp: KEEP (asio core)
- src/ip.cpp: KEEP (openpgm removal)
- src/mailbox.cpp: KEEP (asio mailbox integration)
- src/mailbox.hpp: KEEP (asio mailbox integration)
- src/mailbox_safe.cpp: KEEP (asio mailbox integration)
- src/mailbox_safe.hpp: KEEP (asio mailbox integration)
- src/mechanism.cpp: KEEP (protocol/security removal)
- src/metadata.cpp: KEEP (draft msg property names kept)
- src/msg.cpp: ALIGN (done: malloc/free)
- src/msg.hpp: KEEP (group define kept)
- src/null_mechanism.cpp: KEEP (mechanism differences)
- src/options.cpp: KEEP (security/protocol removal + TLS options; zero_copy restored)
- src/options.hpp: KEEP (security/protocol removal + TLS options; zero_copy restored)
- src/pipe.cpp: ALIGN (done: check_write matches libzmq)
- src/pipe.hpp: ALIGN (done: check_write matches libzmq)
- src/plain_server.cpp: KEEP (security/profile differences)
- src/poller.hpp: KEEP (asio core)
- src/poller_base.cpp: KEEP (poller load check removal for asio)
- src/precompiled.hpp: KEEP (draft header removed)
- src/random.cpp: KEEP (libsodium removal)
- src/reaper.cpp: KEEP (asio mailbox integration)
- src/reaper.hpp: KEEP (asio mailbox integration)
- src/router.cpp: KEEP (raw/draft removal kept; cache removed)
- src/router.hpp: KEEP (raw_socket removed)
- src/secure_allocator.hpp: KEEP (curve/libsodium removal)
- src/session_base.cpp: KEEP (asio connecters + feature removal)
- src/session_base.hpp: KEEP (wss hostname removal)
- src/socket_base.cpp: KEEP (asio/ZMQ_FD integration + router map perf)
- src/socket_base.hpp: KEEP (asio/ZMQ_FD integration + router map perf)
- src/socket_poller.hpp: KEEP (draft types kept)
- src/tcp.cpp: KEEP (loopback_fastpath removal)
- src/v3_1_encoder.cpp: ALIGN (done: stats removed)
- src/ws_address.cpp: KEEP (tls/ws stack changes)
- src/ws_address.hpp: KEEP (tls/ws stack changes)
- src/wss_address.cpp: KEEP (tls/ws stack changes)
- src/wss_address.hpp: KEEP (tls/ws stack changes)
- src/xpub.cpp: ALIGN (done: matches libzmq)
- src/xsub.cpp: KEEP (draft option removal)
- src/zmq.cpp: KEEP (legacy/draft APIs removed, zlink API surface)
- src/zmq_draft.h: KEEP (removed draft options for dropped features)
- src/zmq_utils.cpp: KEEP (curve/z85 removal)

Notes:
- "KEEP" items are intentional divergences; they will not be aligned unless the project scope changes.
- "REVIEW" items will be compared and either aligned to libzmq or reclassified as KEEP with reason.
